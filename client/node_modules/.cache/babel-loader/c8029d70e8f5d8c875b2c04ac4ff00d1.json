{"ast":null,"code":"import axios from 'axios';\nimport Cookie from 'js-cookie';\nimport { SIGNIN_SUCCESS, SIGNOUT_SUCCESS, REQUEST_FAILED } from \"./actionTypes\";\n\nconst signinSuccess = token => {\n  return {\n    type: SIGNIN_SUCCESS,\n    token: token,\n    redirect: '/workouts'\n  };\n};\n\nconst requestFailed = err => {\n  console.log(err.data);\n  return {\n    type: REQUEST_FAILED,\n    errors: err.data\n  };\n};\n\nexport const signin = data => {\n  return dispatch => {\n    axios.post('/api/accounts/signin', data).then(res => {\n      if ('token' in res.data) Cookie.set('token', res.data.token);\n      console.log(res.data);\n      dispatch(signinSuccess(res.data.token));\n    }).catch(err => {\n      dispatch(requestFailed(err.response));\n    });\n  };\n};\nexport const checkSignedIn = () => {\n  return dispatch => {\n    const token = Cookie.get('token');\n\n    if (!token) {\n      dispatch(signout());\n    } else {\n      dispatch(signinSuccess(token));\n    }\n  };\n};\nexport const signout = () => {\n  Cookie.remove('token');\n  return {\n    type: SIGNOUT_SUCCESS,\n    redirect: '/'\n  };\n};","map":{"version":3,"sources":["/var/www/git/projects/diary-of-events/src/store/actions/signin.js"],"names":["axios","Cookie","SIGNIN_SUCCESS","SIGNOUT_SUCCESS","REQUEST_FAILED","signinSuccess","token","type","redirect","requestFailed","err","console","log","data","errors","signin","dispatch","post","then","res","set","catch","response","checkSignedIn","get","signout","remove"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,SAASC,cAAT,EAAyBC,eAAzB,EAA0CC,cAA1C,QAAgE,eAAhE;;AAEA,MAAMC,aAAa,GAAGC,KAAK,IAAI;AAC3B,SAAO;AACHC,IAAAA,IAAI,EAAEL,cADH;AAEHI,IAAAA,KAAK,EAAEA,KAFJ;AAGHE,IAAAA,QAAQ,EAAE;AAHP,GAAP;AAKH,CAND;;AAQA,MAAMC,aAAa,GAAGC,GAAG,IAAI;AACzBC,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACA,SAAO;AACHN,IAAAA,IAAI,EAAEH,cADH;AAEHU,IAAAA,MAAM,EAAEJ,GAAG,CAACG;AAFT,GAAP;AAIH,CAND;;AAQA,OAAO,MAAME,MAAM,GAAGF,IAAI,IAAI;AAC1B,SAAOG,QAAQ,IAAI;AACfhB,IAAAA,KAAK,CAACiB,IAAN,CAAW,sBAAX,EAAmCJ,IAAnC,EACCK,IADD,CACOC,GAAG,IAAI;AACV,UAAI,WAAWA,GAAG,CAACN,IAAnB,EAA0BZ,MAAM,CAACmB,GAAP,CAAW,OAAX,EAAoBD,GAAG,CAACN,IAAJ,CAASP,KAA7B;AAC1BK,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACN,IAAhB;AACAG,MAAAA,QAAQ,CAAEX,aAAa,CAAEc,GAAG,CAACN,IAAJ,CAASP,KAAX,CAAf,CAAR;AACH,KALD,EAMCe,KAND,CAMQX,GAAG,IAAI;AACXM,MAAAA,QAAQ,CAAEP,aAAa,CAAEC,GAAG,CAACY,QAAN,CAAf,CAAR;AACH,KARD;AASH,GAVD;AAWH,CAZM;AAcP,OAAO,MAAMC,aAAa,GAAG,MAAM;AAC/B,SAAOP,QAAQ,IAAI;AACf,UAAMV,KAAK,GAAGL,MAAM,CAACuB,GAAP,CAAW,OAAX,CAAd;;AACA,QAAI,CAAClB,KAAL,EAAY;AACRU,MAAAA,QAAQ,CAAES,OAAO,EAAT,CAAR;AACH,KAFD,MAEO;AACHT,MAAAA,QAAQ,CAAEX,aAAa,CAACC,KAAD,CAAf,CAAR;AACH;AACJ,GAPD;AAQH,CATM;AAWP,OAAO,MAAMmB,OAAO,GAAG,MAAM;AACzBxB,EAAAA,MAAM,CAACyB,MAAP,CAAc,OAAd;AACA,SAAO;AACHnB,IAAAA,IAAI,EAAEJ,eADH;AAEHK,IAAAA,QAAQ,EAAE;AAFP,GAAP;AAIH,CANM","sourcesContent":["import axios from 'axios';\nimport Cookie from 'js-cookie';\n\nimport { SIGNIN_SUCCESS, SIGNOUT_SUCCESS, REQUEST_FAILED } from \"./actionTypes\"\n\nconst signinSuccess = token => {\n    return {\n        type: SIGNIN_SUCCESS,\n        token: token,\n        redirect: '/workouts'\n    };\n};\n\nconst requestFailed = err => {\n    console.log(err.data);\n    return {\n        type: REQUEST_FAILED,\n        errors: err.data\n    };\n}\n\nexport const signin = data => {\n    return dispatch => {\n        axios.post('/api/accounts/signin', data)\n        .then( res => {\n            if( 'token' in res.data ) Cookie.set('token', res.data.token);\n            console.log(res.data);\n            dispatch( signinSuccess( res.data.token ));\n        })\n        .catch( err => {\n            dispatch( requestFailed( err.response ) );\n        })\n    }\n}\n\nexport const checkSignedIn = () => {\n    return dispatch => {\n        const token = Cookie.get('token');\n        if (!token) {\n            dispatch( signout() );\n        } else {\n            dispatch( signinSuccess(token) );\n        }\n    };\n};\n\nexport const signout = () => {\n    Cookie.remove('token');\n    return {\n        type: SIGNOUT_SUCCESS,\n        redirect: '/'\n    };\n};\n"]},"metadata":{},"sourceType":"module"}