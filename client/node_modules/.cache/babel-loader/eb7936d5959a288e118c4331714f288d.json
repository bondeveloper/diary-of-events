{"ast":null,"code":"import axios from'axios';import Cookie from'js-cookie';import{REQUEST_SIGNIN_SUCCESS,REQUEST_SIGNOUT_SUCCESS,REQUEST_SIGNIN_FAILED,REQUEST_SIGNIN_STARTED,RENDER_SIGNIN_COMPONENT}from\"./actionTypes\";var requestSuccess=function requestSuccess(token){console.log(666);return{type:REQUEST_SIGNIN_SUCCESS,token:token,redirect:'/workouts',loading:false,errors:[]};};var requestStarted=function requestStarted(){return{loading:true,type:REQUEST_SIGNIN_STARTED,errors:[]};};var requestFailed=function requestFailed(err){var errors=[];switch(err.status){case 400:errors=err.data.errors;break;case 500:errors.push({message:err.statusText});errors=errors;}return{type:REQUEST_SIGNIN_FAILED,errors:errors,redirect:'/',loading:false};};export var signin=function signin(data){return function(dispatch){dispatch(requestStarted());axios.post('/api/accounts/signin',data).then(function(res){if('token'in res.data)Cookie.set('token',res.data.token);dispatch(requestSuccess(res.data.token));}).catch(function(err){dispatch(requestFailed(err.response));});};};export var checkSignedIn=function checkSignedIn(){return function(dispatch){var token=Cookie.get('token');if(!token){signout();}else{dispatch(requestSuccess(token));}};};export var showSignin=function showSignin(){return function(dispatch){dispatch({errors:[],type:RENDER_SIGNIN_COMPONENT});};};export var signout=function signout(){Cookie.remove('token');console.log(55555555555);// return { redirect: '/', type: REQUEST_SIGNOUT_SUCCESS,};\nreturn function(dispatch){dispatch({type:REQUEST_SIGNOUT_SUCCESS,token:null,redirect:'/'});};};","map":{"version":3,"sources":["/var/www/git/projects/diary-of-events/src/store/actions/signin.js"],"names":["axios","Cookie","REQUEST_SIGNIN_SUCCESS","REQUEST_SIGNOUT_SUCCESS","REQUEST_SIGNIN_FAILED","REQUEST_SIGNIN_STARTED","RENDER_SIGNIN_COMPONENT","requestSuccess","token","console","log","type","redirect","loading","errors","requestStarted","requestFailed","err","status","data","push","message","statusText","signin","dispatch","post","then","res","set","catch","response","checkSignedIn","get","signout","showSignin","remove"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAEA,OAASC,sBAAT,CAAiCC,uBAAjC,CAA0DC,qBAA1D,CAAiFC,sBAAjF,CAAyGC,uBAAzG,KAAwI,eAAxI,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,KAAK,CAAI,CAC5BC,OAAO,CAACC,GAAR,CAAY,GAAZ,EACA,MAAO,CACHC,IAAI,CAAET,sBADH,CAEHM,KAAK,CAAEA,KAFJ,CAGHI,QAAQ,CAAE,WAHP,CAIHC,OAAO,CAAE,KAJN,CAKHC,MAAM,CAAE,EALL,CAAP,CAOH,CATD,CAYA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,MAAO,CACHF,OAAO,CAAE,IADN,CAEHF,IAAI,CAAEN,sBAFH,CAGHS,MAAM,CAAE,EAHL,CAAP,CAKH,CAND,CAQA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,GAAG,CAAI,CACzB,GAAIH,CAAAA,MAAM,CAAG,EAAb,CACA,OAAQG,GAAG,CAACC,MAAZ,EACI,IAAK,IAAL,CACIJ,MAAM,CAAGG,GAAG,CAACE,IAAJ,CAASL,MAAlB,CACA,MACJ,IAAK,IAAL,CACIA,MAAM,CAACM,IAAP,CAAY,CAAEC,OAAO,CAAEJ,GAAG,CAACK,UAAf,CAAZ,EACAR,MAAM,CAAGA,MAAT,CANR,CAQA,MAAO,CACHH,IAAI,CAAEP,qBADH,CAEHU,MAAM,CAAEA,MAFL,CAGHF,QAAQ,CAAE,GAHP,CAIHC,OAAO,CAAE,KAJN,CAAP,CAMH,CAhBD,CAkBA,MAAO,IAAMU,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAJ,IAAI,CAAI,CAC1B,MAAO,UAAAK,QAAQ,CAAI,CACfA,QAAQ,CAAET,cAAc,EAAhB,CAAR,CAEAf,KAAK,CAACyB,IAAN,CAAW,sBAAX,CAAmCN,IAAnC,EACCO,IADD,CACO,SAAAC,GAAG,CAAI,CACV,GAAI,SAAWA,CAAAA,GAAG,CAACR,IAAnB,CAA0BlB,MAAM,CAAC2B,GAAP,CAAW,OAAX,CAAoBD,GAAG,CAACR,IAAJ,CAASX,KAA7B,EAC1BgB,QAAQ,CAAEjB,cAAc,CAAEoB,GAAG,CAACR,IAAJ,CAASX,KAAX,CAAhB,CAAR,CACH,CAJD,EAKCqB,KALD,CAKQ,SAAAZ,GAAG,CAAI,CACXO,QAAQ,CAAER,aAAa,CAAEC,GAAG,CAACa,QAAN,CAAf,CAAR,CACH,CAPD,EAQH,CAXD,CAYH,CAbM,CAeP,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC/B,MAAO,UAAAP,QAAQ,CAAI,CACf,GAAMhB,CAAAA,KAAK,CAAGP,MAAM,CAAC+B,GAAP,CAAW,OAAX,CAAd,CACA,GAAI,CAACxB,KAAL,CAAY,CACRyB,OAAO,GACV,CAFD,IAEO,CACHT,QAAQ,CAAEjB,cAAc,CAAEC,KAAF,CAAhB,CAAR,CACH,CACJ,CAPD,CAQH,CATM,CAWP,MAAO,IAAM0B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CAC5B,MAAO,UAAAV,QAAQ,CAAI,CACfA,QAAQ,CAAC,CACLV,MAAM,CAAE,EADH,CAELH,IAAI,CAAEL,uBAFD,CAAD,CAAR,CAIH,CALD,CAMH,CAPM,CASP,MAAO,IAAM2B,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACzBhC,MAAM,CAACkC,MAAP,CAAc,OAAd,EACA1B,OAAO,CAACC,GAAR,CAAY,WAAZ,EACA;AACA,MAAO,UAAAc,QAAQ,CAAI,CACfA,QAAQ,CAAC,CACLb,IAAI,CAAER,uBADD,CAELK,KAAK,CAAE,IAFF,CAGLI,QAAQ,CAAE,GAHL,CAAD,CAAR,CAKH,CAND,CAOH,CAXM","sourcesContent":["import axios from 'axios';\nimport Cookie from 'js-cookie';\n\nimport { REQUEST_SIGNIN_SUCCESS, REQUEST_SIGNOUT_SUCCESS, REQUEST_SIGNIN_FAILED, REQUEST_SIGNIN_STARTED, RENDER_SIGNIN_COMPONENT } from \"./actionTypes\"\n\nconst requestSuccess = token => {\n    console.log(666);\n    return {\n        type: REQUEST_SIGNIN_SUCCESS,\n        token: token,\n        redirect: '/workouts',\n        loading: false,\n        errors: [],\n    };\n};\n\n\nconst requestStarted = () => {\n    return {\n        loading: true,\n        type: REQUEST_SIGNIN_STARTED,\n        errors: [],\n    }\n}\n\nconst requestFailed = err => {\n    let errors = [];\n    switch( err.status ) {\n        case 400:\n            errors = err.data.errors;\n            break;\n        case 500:\n            errors.push({ message: err.statusText})\n            errors = errors;\n    }\n    return {\n        type: REQUEST_SIGNIN_FAILED,\n        errors: errors,\n        redirect: '/',\n        loading: false\n    };\n}\n\nexport const signin = data => {\n    return dispatch => {\n        dispatch( requestStarted() );\n\n        axios.post('/api/accounts/signin', data)\n        .then( res => {\n            if( 'token' in res.data ) Cookie.set('token', res.data.token);\n            dispatch( requestSuccess( res.data.token ));\n        })\n        .catch( err => {\n            dispatch( requestFailed( err.response ) );\n        })\n    }\n}\n\nexport const checkSignedIn = () => {\n    return dispatch => {\n        const token = Cookie.get('token');\n        if (!token) {\n            signout();\n        } else {\n            dispatch( requestSuccess( token ) );\n        }\n    };\n};\n\nexport const showSignin = () => {\n    return dispatch => {\n        dispatch({\n            errors: [],\n            type: RENDER_SIGNIN_COMPONENT\n        });\n    };\n};\n\nexport const signout = () => {\n    Cookie.remove('token');\n    console.log(55555555555);\n    // return { redirect: '/', type: REQUEST_SIGNOUT_SUCCESS,};\n    return dispatch => {\n        dispatch({\n            type: REQUEST_SIGNOUT_SUCCESS,\n            token: null,\n            redirect: '/'\n        });\n    };\n};\n"]},"metadata":{},"sourceType":"module"}