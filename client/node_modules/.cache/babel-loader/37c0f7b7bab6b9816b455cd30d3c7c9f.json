{"ast":null,"code":"import _classCallCheck from\"/var/www/git/projects/diary-of-events/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/var/www/git/projects/diary-of-events/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/var/www/git/projects/diary-of-events/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/var/www/git/projects/diary-of-events/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{connect}from'react-redux';import React,{Component}from'react';import{Redirect}from'react-router-dom';import{Form,Alert,Button,Spinner,Col,InputGroup}from'react-bootstrap';import{Formik}from'formik';import*as yup from'yup';import classes from'./Signin.module.css';import Aux from'../../../hoc/Aux/Aux';import*as actions from'../../../store/actions/index';var Signin=/*#__PURE__*/function(_Component){_inherits(Signin,_Component);var _super=_createSuper(Signin);function Signin(){var _this;_classCallCheck(this,Signin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={validated:false};_this.onSigninHandler=function(form){_this.setState({validated:true});_this.props.onSignin(form);_this.props.history.push(_this.props.redirect);return/*#__PURE__*/_jsx(Redirect,{to:_this.props.redirect});};return _this;}_createClass(Signin,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onSigninShow();}},{key:\"render\",value:function render(){var errors=this.props.errors&&this.props.errors.length>0?/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:this.props.errors.map(function(err,key){return/*#__PURE__*/_jsxs(\"span\",{children:[err.message,\" \",/*#__PURE__*/_jsx(\"br\",{})]},key);})}):null;var signinBtnChild=this.props.loading?/*#__PURE__*/_jsxs(Aux,{children:[/*#__PURE__*/_jsx(Spinner,{as:\"span\",animation:\"grow\",size:\"sm\",role:\"status\",\"aria-hidden\":\"true\"}),\"Loading...\"]}):'Signin';var schema=yup.object({email:yup.string().required().email(),password:yup.string().required()});return/*#__PURE__*/_jsx(Formik,{validationSchema:schema,onSubmit:this.onSigninHandler,initialValues:{email:'',password:''},children:function children(_ref){var handleSubmit=_ref.handleSubmit,handleChange=_ref.handleChange,handleBlur=_ref.handleBlur,values=_ref.values,touched=_ref.touched,isValid=_ref.isValid,errors=_ref.errors;return/*#__PURE__*/_jsxs(Form,{noValidate:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Email\",name:\"email\",value:values.email,onChange:handleChange,isInvalid:!!errors.email}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:errors.email})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",value:values.password,onChange:handleChange,isInvalid:!!errors.password}),/*#__PURE__*/_jsx(Form.Control.Feedback,{type:\"invalid\",children:errors.password})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.Buttons,children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",type:\"submit\",children:signinBtnChild})})]});}});}}]);return Signin;}(Component);;var mapStateToProps=function mapStateToProps(state){return{isAuth:state.signin.token!==null,redirect:state.signin.redirect,errors:state.signin.errors,loading:state.signin.loading};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onSignin:function onSignin(data){return dispatch(actions.signin(data));},onSigninShow:function onSigninShow(){return dispatch(actions.showSignin());},onCheckAuth:function onCheckAuth(){return dispatch(actions.checkSignedIn());}};};export default connect(mapStateToProps,mapDispatchToProps)(Signin);","map":{"version":3,"sources":["/var/www/git/projects/diary-of-events/src/components/Auth/Signin/Signin.js"],"names":["connect","React","Component","Redirect","Form","Alert","Button","Spinner","Col","InputGroup","Formik","yup","classes","Aux","actions","Signin","state","validated","onSigninHandler","form","setState","props","onSignin","history","push","redirect","onSigninShow","errors","length","map","err","key","message","signinBtnChild","loading","schema","object","email","string","required","password","handleSubmit","handleChange","handleBlur","values","touched","isValid","Buttons","mapStateToProps","isAuth","signin","token","mapDispatchToProps","dispatch","data","showSignin","onCheckAuth","checkSignedIn"],"mappings":"wrBAAA,OAASA,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,IAAT,CAAeC,KAAf,CAAsBC,MAAtB,CAA8BC,OAA9B,CAAuCC,GAAvC,CAA4CC,UAA5C,KAA8D,iBAA9D,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,sBAAhB,CAEA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,8BAAzB,C,GAEMC,CAAAA,M,2TACFC,K,CAAQ,CACJC,SAAS,CAAE,KADP,C,OAQRC,e,CAAkB,SAAAC,IAAI,CAAI,CACtB,MAAKC,QAAL,CAAc,CAAEH,SAAS,CAAE,IAAb,CAAd,EACA,MAAKI,KAAL,CAAWC,QAAX,CAAqBH,IAArB,EAEA,MAAKE,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,CAAyB,MAAKH,KAAL,CAAWI,QAApC,EACA,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAG,MAAKJ,KAAL,CAAWI,QAA1B,EAAP,CACH,C,+FAVoB,CACjB,KAAKJ,KAAL,CAAWK,YAAX,GACH,C,uCAUS,CACN,GAAMC,CAAAA,MAAM,CAAG,KAAKN,KAAL,CAAWM,MAAX,EAAqB,KAAKN,KAAL,CAAWM,MAAX,CAAkBC,MAAlB,CAA2B,CAAhD,cACX,KAAC,KAAD,EAAO,OAAO,CAAC,QAAf,UAEQ,KAAKP,KAAL,CAAWM,MAAX,CAAkBE,GAAlB,CAAuB,SAAEC,GAAF,CAAOC,GAAP,qBAAgB,wBAAoBD,GAAG,CAACE,OAAxB,kBAAkC,aAAlC,GAAYD,GAAZ,CAAhB,EAAvB,CAFR,EADW,CAMZ,IANH,CAQA,GAAME,CAAAA,cAAc,CAAG,KAAKZ,KAAL,CAAWa,OAAX,cACnB,MAAC,GAAD,yBACI,KAAC,OAAD,EACA,EAAE,CAAC,MADH,CAEA,SAAS,CAAC,MAFV,CAGA,IAAI,CAAC,IAHL,CAIA,IAAI,CAAC,QAJL,CAKA,cAAY,MALZ,EADJ,gBADmB,CAWpB,QAXH,CAaA,GAAMC,CAAAA,MAAM,CAAGxB,GAAG,CAACyB,MAAJ,CAAW,CACtBC,KAAK,CAAE1B,GAAG,CAAC2B,MAAJ,GAAaC,QAAb,GAAwBF,KAAxB,EADe,CAEtBG,QAAQ,CAAE7B,GAAG,CAAC2B,MAAJ,GAAaC,QAAb,EAFY,CAAX,CAAf,CAKA,mBACA,KAAC,MAAD,EACI,gBAAgB,CAAEJ,MADtB,CAEI,QAAQ,CAAE,KAAKjB,eAFnB,CAGI,aAAa,CAAE,CACXmB,KAAK,CAAE,EADI,CAEXG,QAAQ,CAAE,EAFC,CAHnB,UAQC,2BACGC,CAAAA,YADH,MACGA,YADH,CAEGC,YAFH,MAEGA,YAFH,CAGGC,UAHH,MAGGA,UAHH,CAIGC,MAJH,MAIGA,MAJH,CAKGC,OALH,MAKGA,OALH,CAMGC,OANH,MAMGA,OANH,CAOGnB,MAPH,MAOGA,MAPH,oBASD,MAAC,IAAD,EAAM,UAAU,KAAhB,CAAiB,QAAQ,CAAEc,YAA3B,wBACI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAEjC,GAAhB,CAAqB,SAAS,CAAC,OAA/B,wBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,OAFd,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAEoC,MAAM,CAACP,KAJhB,CAKE,QAAQ,CAAEK,YALZ,CAME,SAAS,CAAE,CAAC,CAACf,MAAM,CAACU,KANtB,EAFF,cAUE,KAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,UACGV,MAAM,CAACU,KADV,EAVF,GADJ,cAeI,MAAC,IAAD,CAAM,KAAN,EAAY,EAAE,CAAE7B,GAAhB,CAAqB,SAAS,CAAC,UAA/B,wBACI,KAAC,IAAD,CAAM,KAAN,uBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,UADT,CAEI,WAAW,CAAC,UAFhB,CAGI,IAAI,CAAC,UAHT,CAII,KAAK,CAAEoC,MAAM,CAACJ,QAJlB,CAKI,QAAQ,CAAEE,YALd,CAMI,SAAS,CAAE,CAAC,CAACf,MAAM,CAACa,QANxB,EAFJ,cAUM,KAAC,IAAD,CAAM,OAAN,CAAc,QAAd,EAAuB,IAAI,CAAC,SAA5B,UACGb,MAAM,CAACa,QADV,EAVN,GAfJ,cA6BI,YAAK,SAAS,CAAE5B,OAAO,CAACmC,OAAxB,uBACI,KAAC,MAAD,EAAQ,OAAO,CAAC,QAAhB,CAAyB,IAAI,CAAC,QAA9B,UAAyCd,cAAzC,EADJ,EA7BJ,GATC,EARD,EADA,CAsDH,C,oBAlGgB/B,S,EAmGpB,CAED,GAAM8C,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAhC,KAAK,CAAI,CAC7B,MAAO,CACHiC,MAAM,CAAEjC,KAAK,CAACkC,MAAN,CAAaC,KAAb,GAAuB,IAD5B,CAEH1B,QAAQ,CAAET,KAAK,CAACkC,MAAN,CAAazB,QAFpB,CAGHE,MAAM,CAAEX,KAAK,CAACkC,MAAN,CAAavB,MAHlB,CAIHO,OAAO,CAAElB,KAAK,CAACkC,MAAN,CAAahB,OAJnB,CAAP,CAMH,CAPD,CASA,GAAMkB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACnC,MAAO,CACH/B,QAAQ,CAAG,kBAAAgC,IAAI,QAAID,CAAAA,QAAQ,CAAEvC,OAAO,CAACoC,MAAR,CAAiBI,IAAjB,CAAF,CAAZ,EADZ,CAEH5B,YAAY,CAAE,8BAAM2B,CAAAA,QAAQ,CAAEvC,OAAO,CAACyC,UAAR,EAAF,CAAd,EAFX,CAGHC,WAAW,CAAE,6BAAMH,CAAAA,QAAQ,CAAEvC,OAAO,CAAC2C,aAAR,EAAF,CAAd,EAHV,CAAP,CAKH,CAND,CAQA,cAAezD,CAAAA,OAAO,CAAEgD,eAAF,CAAmBI,kBAAnB,CAAP,CAAgDrC,MAAhD,CAAf","sourcesContent":["import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { Form, Alert, Button, Spinner, Col, InputGroup } from 'react-bootstrap';\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\n\nimport classes from './Signin.module.css';\n\nimport Aux from '../../../hoc/Aux/Aux';\n\nimport * as actions from '../../../store/actions/index';\n\nclass Signin extends Component {\n    state = {\n        validated: false\n    }\n\n    componentDidMount () {\n        this.props.onSigninShow();\n    }\n\n    onSigninHandler = form => {\n        this.setState({ validated: true });\n        this.props.onSignin( form );\n\n        this.props.history.push( this.props.redirect );\n        return <Redirect to={ this.props.redirect} />;\n    }\n\n    render () {\n        const errors = this.props.errors && this.props.errors.length > 0 ? (\n            <Alert variant='danger'>\n                {\n                    this.props.errors.map( ( err, key ) => <span key={ key }>{ err.message } <br/></span>)\n                }\n            </Alert>\n        ): null;\n\n        const signinBtnChild = this.props.loading ? (\n            <Aux>\n                <Spinner\n                as=\"span\"\n                animation=\"grow\"\n                size=\"sm\"\n                role=\"status\"\n                aria-hidden=\"true\"\n                />\n                Loading...\n            </Aux>\n        ): 'Signin';\n\n        const schema = yup.object({\n            email: yup.string().required().email(),\n            password: yup.string().required(),\n        });\n\n        return (\n        <Formik\n            validationSchema={schema}\n            onSubmit={this.onSigninHandler}\n            initialValues={{\n                email: '',\n                password: ''\n            }}\n        >\n        {({\n            handleSubmit,\n            handleChange,\n            handleBlur,\n            values,\n            touched,\n            isValid,\n            errors,\n        }) => (\n        <Form noValidate onSubmit={handleSubmit}>\n            <Form.Group as={Col} controlId=\"email\">\n              <Form.Label>Email</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Email\"\n                name=\"email\"\n                value={values.email}\n                onChange={handleChange}\n                isInvalid={!!errors.email}\n              />\n              <Form.Control.Feedback type=\"invalid\">\n                {errors.email}\n              </Form.Control.Feedback>\n            </Form.Group>\n            <Form.Group as={Col} controlId=\"password\">\n                <Form.Label>Password</Form.Label>\n                <Form.Control\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                    value={values.password}\n                    onChange={handleChange}\n                    isInvalid={!!errors.password}\n                />\n                  <Form.Control.Feedback type=\"invalid\">\n                    {errors.password}\n                  </Form.Control.Feedback>\n            </Form.Group>\n            <div className={classes.Buttons}>\n                <Button variant='danger' type=\"submit\">{ signinBtnChild }</Button>\n                {/* <Button variant='secondary' disabled={this.props.loading}>Cancel</Button> */}\n            </div>\n        </Form>\n      )}\n    </Formik>);\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        isAuth: state.signin.token !== null,\n        redirect: state.signin.redirect,\n        errors: state.signin.errors,\n        loading: state.signin.loading\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onSignin : data => dispatch( actions.signin ( data ) ),\n        onSigninShow: () => dispatch( actions.showSignin() ),\n        onCheckAuth: () => dispatch( actions.checkSignedIn() )\n    };\n};\n\nexport default connect( mapStateToProps, mapDispatchToProps) ( Signin );\n"]},"metadata":{},"sourceType":"module"}