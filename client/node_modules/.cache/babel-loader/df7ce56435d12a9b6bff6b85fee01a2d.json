{"ast":null,"code":"import axios from 'axios';\nimport { WORKOUT_FETCH_SUCCESS, WORKOUT_VIEWED_SET, WORKOUT_SESSION_CREATE_SUCCESSFUL, WORKOUT_SESSION_DELETE_SUCCESSFUL, WORKOUT_SESSION_UPDATE_SUCCESSFUL, WORKOUT_CREATE_SUCCESSFUL, WORKOUT_DELETE_SUCCESSFUL, RENDER_COMPONENT } from './actionTypes';\nexport const fetchWorkoutsSuccessful = data => {\n  return {\n    type: WORKOUT_FETCH_SUCCESS,\n    list: data\n  };\n};\n\nconst onRequestSuccess = (component, data = null, type = RENDER_COMPONENT) => {\n  let redirect = '';\n  let deleted = false;\n\n  switch (component) {\n    case 'workout':\n      redirect = `/workouts/${data._id}`;\n      break;\n\n    case 'workouts':\n      redirect = '/workouts';\n      deleted = true;\n      if ('workout' in data && 'deletedCount' in data.workout && data.workout.deletedCount === 1) deleted = true;\n      break;\n  }\n\n  return {\n    type: type,\n    redirect: redirect,\n    view: data,\n    deleted: deleted\n  };\n};\n\nconst render = data => {\n  const {\n    redirect,\n    view\n  } = { ...data\n  };\n  return dispatch => {\n    dispatch({\n      type: RENDER_COMPONENT,\n      redirect: redirect,\n      view: view\n    });\n  };\n};\n\nexport const fetchWorkouts = token => {\n  return dispatch => {\n    axios.get('/api/workouts/', {\n      headers: {\n        'auth-token': token\n      }\n    }).then(res => {\n      dispatch(fetchWorkoutsSuccessful(res.data.workouts));\n    }).catch(err => {});\n  };\n};\nexport const viewedWorkout = data => {\n  return {\n    type: WORKOUT_VIEWED_SET,\n    view: data\n  };\n};\nexport const setViewedWorkout = data => {\n  return dispatch => {\n    dispatch(viewedWorkout(data));\n  };\n};\nexport const createWorkoutSession = data => {\n  return dispatch => {\n    axios.post('/api/workouts/' + data.id + '/sessions', data.data, {\n      headers: {\n        'auth-token': data.token\n      }\n    }).then(res => {\n      dispatch(onRequestSuccess('workout', res.data.workout));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const updateWorkoutSession = data => {\n  console.log(data);\n  return dispatch => {\n    axios.patch(`/api/workouts/${data.id}/sessions/${data.sessionId}`, data.data, {\n      headers: {\n        'auth-token': data.token\n      }\n    }).then(res => {\n      console.log(res.data);\n      dispatch(onRequestSuccess(WORKOUT_SESSION_UPDATE_SUCCESSFUL));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const deleteWorkoutSession = data => {\n  return dispatch => {\n    axios.delete(`/api/workouts/${data.id}/sessions/${data.sessionId}`, {\n      headers: {\n        'auth-token': data.token\n      }\n    }).then(res => {\n      dispatch(onRequestSuccess('workouts', res.data));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const createWorkout = data => {\n  return dispatch => {\n    axios.post('/api/workouts', data.data, {\n      headers: {\n        'auth-token': data.token\n      }\n    }).then(res => {\n      dispatch(onRequestSuccess('workout', res.data.workout));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const deleteWorkout = data => {\n  return dispatch => {\n    axios.delete(`/api/workouts/${data.id}`, {\n      headers: {\n        'auth-token': data.token\n      }\n    }).then(res => {\n      console.log(res.data);\n      dispatch(onRequestSuccess('workouts'));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const renderCreateWorkout = () => {\n  return render({\n    redirect: '/workouts/create'\n  });\n};\nexport const renderViewWorkout = data => {\n  return render({\n    redirect: `/workouts/${data._id}`,\n    view: data\n  });\n};\nexport const renderCreateWorkoutSession = pk => {\n  return render({\n    redirect: `/workouts/${pk}/sessions/create`\n  });\n};","map":{"version":3,"sources":["/var/www/git/projects/diary-of-events/src/store/actions/workouts.js"],"names":["axios","WORKOUT_FETCH_SUCCESS","WORKOUT_VIEWED_SET","WORKOUT_SESSION_CREATE_SUCCESSFUL","WORKOUT_SESSION_DELETE_SUCCESSFUL","WORKOUT_SESSION_UPDATE_SUCCESSFUL","WORKOUT_CREATE_SUCCESSFUL","WORKOUT_DELETE_SUCCESSFUL","RENDER_COMPONENT","fetchWorkoutsSuccessful","data","type","list","onRequestSuccess","component","redirect","deleted","_id","workout","deletedCount","view","render","dispatch","fetchWorkouts","token","get","headers","then","res","workouts","catch","err","viewedWorkout","setViewedWorkout","createWorkoutSession","post","id","console","log","updateWorkoutSession","patch","sessionId","deleteWorkoutSession","delete","createWorkout","deleteWorkout","renderCreateWorkout","renderViewWorkout","renderCreateWorkoutSession","pk"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { \n    WORKOUT_FETCH_SUCCESS,\n    WORKOUT_VIEWED_SET,\n    WORKOUT_SESSION_CREATE_SUCCESSFUL,\n    WORKOUT_SESSION_DELETE_SUCCESSFUL,\n    WORKOUT_SESSION_UPDATE_SUCCESSFUL,\n    WORKOUT_CREATE_SUCCESSFUL,\n    WORKOUT_DELETE_SUCCESSFUL,\n    RENDER_COMPONENT\n    } from './actionTypes';\n\nexport const fetchWorkoutsSuccessful = data => {\n    return {\n        type: WORKOUT_FETCH_SUCCESS,\n        list: data\n    }\n}\n\nconst onRequestSuccess = ( component, data = null, type = RENDER_COMPONENT) => {\n    let redirect = '';\n    let deleted = false;\n    switch ( component ) {\n        case 'workout':\n            redirect = `/workouts/${data._id}`;\n            break;\n        case 'workouts':\n            redirect = '/workouts';\n            deleted = true\n            if ( 'workout' in data && 'deletedCount' in data.workout && data.workout.deletedCount === 1) deleted = true;\n            break;\n    }\n\n    return {\n        type: type,\n        redirect: redirect,\n        view: data,\n        deleted: deleted\n    }\n}\n\n\nconst render = data => {\n    const { redirect, view } = {...data};\n    return dispatch => {\n        dispatch({\n            type: RENDER_COMPONENT,\n            redirect: redirect,\n            view: view,\n            \n        })\n    }\n}\n\nexport const fetchWorkouts = token => {\n    return dispatch => {\n        axios.get('/api/workouts/', {\n            headers: {\n                'auth-token' : token\n            }\n        })\n        .then( res => {\n            dispatch( fetchWorkoutsSuccessful( res.data.workouts ));\n        })\n        .catch( err => {\n\n        });\n    };\n};\n\nexport const viewedWorkout = data => {\n    return {\n        type: WORKOUT_VIEWED_SET,\n        view: data\n    }\n}\n\nexport const setViewedWorkout = data => {\n    return dispatch => {\n        dispatch( viewedWorkout( data ) )\n    };\n}\n\nexport const createWorkoutSession = data => {\n    return dispatch => {\n        axios.post('/api/workouts/'+data.id+'/sessions', data.data, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            dispatch( onRequestSuccess( 'workout', res.data.workout ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const updateWorkoutSession = data => {\n    console.log(data);\n    return dispatch => {\n        axios.patch(`/api/workouts/${data.id}/sessions/${data.sessionId}`, data.data, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            console.log( res.data );\n            dispatch( onRequestSuccess( WORKOUT_SESSION_UPDATE_SUCCESSFUL ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const deleteWorkoutSession = data => {\n    return dispatch => {\n        axios.delete(`/api/workouts/${data.id}/sessions/${data.sessionId}`, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            dispatch( onRequestSuccess( 'workouts', res.data ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const createWorkout = data => {\n    return dispatch => {\n        axios.post('/api/workouts', data.data, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            dispatch( onRequestSuccess( 'workout', res.data.workout ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const deleteWorkout = data => {\n    return dispatch => {\n        axios.delete(`/api/workouts/${data.id}`, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            console.log( res.data );\n            dispatch( onRequestSuccess( 'workouts' ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const renderCreateWorkout = () => {\n    return render( { redirect: '/workouts/create' } );\n}\nexport const renderViewWorkout = data => {\n    return render( {\n        redirect: `/workouts/${ data._id }`,\n        view: data\n    } );\n}\n\nexport const renderCreateWorkoutSession = ( pk ) => {\n    return render( { redirect: `/workouts/${pk}/sessions/create` } );    \n}"]},"metadata":{},"sourceType":"module"}