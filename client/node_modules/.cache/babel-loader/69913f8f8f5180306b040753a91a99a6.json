{"ast":null,"code":"import _objectSpread from\"/var/www/git/projects/diary-of-events/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import axios from'axios';import{useAsync}from'react-async';import{WORKOUT_FETCH_SUCCESS,WORKOUT_VIEWED_SET,WORKOUT_SESSION_UPDATE_SUCCESSFUL,RENDER_WORKOUT_COMPONENT}from'./actionTypes';export var fetchWorkoutsSuccessful=function fetchWorkoutsSuccessful(data){return{type:WORKOUT_FETCH_SUCCESS,list:data};};var onRequestSuccess=function onRequestSuccess(component){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var isList=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var type=arguments.length>3&&arguments[3]!==undefined?arguments[3]:RENDER_WORKOUT_COMPONENT;var redirect='';var view,list=null;switch(component){case'workout':redirect=\"/workouts/\".concat(data._id);break;case'workouts':redirect='/workouts';break;}if(isList)list=data;else view=data;return{type:type,redirect:redirect,view:view,loading:false,list:list};};var onRequestStarted=function onRequestStarted(){return{type:RENDER_WORKOUT_COMPONENT,loading:true,redirect:'/workouts'};};var render=function render(data){var _data=_objectSpread({},data),redirect=_data.redirect,view=_data.view;return function(dispatch){dispatch({type:RENDER_WORKOUT_COMPONENT,redirect:redirect,view:view});};};export var fetchWorkouts=function fetchWorkouts(token){return function(dispatch){dispatch(onRequestStarted());axios.get('/api/workouts/',{headers:{'auth-token':token}}).then(function(res){dispatch(onRequestSuccess('workouts',res.data.workouts,true));}).catch(function(err){});};};export var viewedWorkout=function viewedWorkout(data){return{type:WORKOUT_VIEWED_SET,view:data};};export var setViewedWorkout=function setViewedWorkout(data){return function(dispatch){dispatch(viewedWorkout(data));};};export var createWorkoutSession=function createWorkoutSession(data){return function(dispatch){axios.post('/api/workouts/'+data.id+'/sessions',data.data,{headers:{'auth-token':data.token}}).then(function(res){dispatch(onRequestSuccess('workout',res.data.workout));}).catch(function(err){console.log(err);});};};export var updateWorkoutSession=function updateWorkoutSession(data){console.log(data);return function(dispatch){axios.patch(\"/api/workouts/\".concat(data.id,\"/sessions/\").concat(data.sessionId),data.data,{headers:{'auth-token':data.token}}).then(function(res){console.log(res.data);dispatch(onRequestSuccess(WORKOUT_SESSION_UPDATE_SUCCESSFUL));}).catch(function(err){console.log(err);});};};export var deleteWorkoutSession=function deleteWorkoutSession(data){return function(dispatch){axios.delete(\"/api/workouts/\".concat(data.id,\"/sessions/\").concat(data.sessionId),{headers:{'auth-token':data.token}}).then(function(res){dispatch(onRequestSuccess('workouts',res.data));}).catch(function(err){console.log(err);});};};export var createWorkout=function createWorkout(data){return function(dispatch){axios.post('/api/workouts',data.data,{headers:{'auth-token':data.token}}).then(function(res){dispatch(onRequestSuccess('workout',res.data.workout));}).catch(function(err){console.log(err);});};};export var deleteWorkout=function deleteWorkout(data){return function(dispatch){axios.delete(\"/api/workouts/\".concat(data.id),{headers:{'auth-token':data.token}}).then(function(res){console.log(res.data);dispatch(onRequestSuccess('workouts',res.data));}).catch(function(err){console.log(err);});};};export var renderCreateWorkout=function renderCreateWorkout(){return render({redirect:'/workouts/create'});};export var renderViewWorkout=function renderViewWorkout(data){return render({redirect:\"/workouts/\".concat(data._id),view:data});};export var renderCreateWorkoutSession=function renderCreateWorkoutSession(pk){return render({redirect:\"/workouts/\".concat(pk,\"/sessions/create\")});};","map":{"version":3,"sources":["/var/www/git/projects/diary-of-events/src/store/actions/workouts.js"],"names":["axios","useAsync","WORKOUT_FETCH_SUCCESS","WORKOUT_VIEWED_SET","WORKOUT_SESSION_UPDATE_SUCCESSFUL","RENDER_WORKOUT_COMPONENT","fetchWorkoutsSuccessful","data","type","list","onRequestSuccess","component","isList","redirect","view","_id","loading","onRequestStarted","render","dispatch","fetchWorkouts","token","get","headers","then","res","workouts","catch","err","viewedWorkout","setViewedWorkout","createWorkoutSession","post","id","workout","console","log","updateWorkoutSession","patch","sessionId","deleteWorkoutSession","delete","createWorkout","deleteWorkout","renderCreateWorkout","renderViewWorkout","renderCreateWorkoutSession","pk"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { useAsync } from 'react-async';\n\nimport { \n    WORKOUT_FETCH_SUCCESS,\n    WORKOUT_VIEWED_SET,\n    WORKOUT_SESSION_UPDATE_SUCCESSFUL,\n    RENDER_WORKOUT_COMPONENT\n    } from './actionTypes';\n\nexport const fetchWorkoutsSuccessful = data => {\n    return {\n        type: WORKOUT_FETCH_SUCCESS,\n        list: data\n    }\n}\n\nconst onRequestSuccess = ( component, data = null, isList = false, type = RENDER_WORKOUT_COMPONENT ) => {\n    let redirect = '';\n    let view, list = null;\n    switch ( component ) {\n        case 'workout':\n            redirect = `/workouts/${data._id}`;\n            break;\n        case 'workouts':\n            redirect = '/workouts';\n            break;\n    }\n\n    if ( isList ) list = data; else view = data;\n\n    return {\n        type: type,\n        redirect: redirect,\n        view: view,\n        loading: false,\n        list: list\n    }\n}\n\nconst onRequestStarted = () => {\n    return {\n        type: RENDER_WORKOUT_COMPONENT,\n        loading: true,\n        redirect: '/workouts'\n    }\n}\n\n\nconst render = data => {\n    const { redirect, view } = {...data};\n    return dispatch => {\n        dispatch({\n            type: RENDER_WORKOUT_COMPONENT,\n            redirect: redirect,\n            view: view,\n            \n        })\n    }\n}\n\nexport const fetchWorkouts = token => {\n    return dispatch => {\n\n        dispatch( onRequestStarted() );\n\n        axios.get('/api/workouts/', {\n            headers: {\n                'auth-token' : token\n            }\n        })\n        .then( res => {\n            dispatch( onRequestSuccess( 'workouts', res.data.workouts, true));\n        })\n        .catch( err => {\n\n        });\n    };\n};\n\nexport const viewedWorkout = data => {\n    return {\n        type: WORKOUT_VIEWED_SET,\n        view: data\n    }\n}\n\nexport const setViewedWorkout = data => {\n    return dispatch => {\n        dispatch( viewedWorkout( data ) )\n    };\n}\n\nexport const createWorkoutSession = data => {\n    return dispatch => {\n        axios.post('/api/workouts/'+data.id+'/sessions', data.data, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            dispatch( onRequestSuccess( 'workout', res.data.workout ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const updateWorkoutSession = data => {\n    console.log(data);\n    return dispatch => {\n        axios.patch(`/api/workouts/${data.id}/sessions/${data.sessionId}`, data.data, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            console.log( res.data );\n            dispatch( onRequestSuccess( WORKOUT_SESSION_UPDATE_SUCCESSFUL ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const deleteWorkoutSession = data => {\n    return dispatch => {\n        axios.delete(`/api/workouts/${data.id}/sessions/${data.sessionId}`, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            dispatch( onRequestSuccess( 'workouts', res.data ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const createWorkout = data => {\n    return dispatch => {\n        axios.post('/api/workouts', data.data, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            dispatch( onRequestSuccess( 'workout', res.data.workout ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const deleteWorkout = data => {\n    return dispatch => {\n        axios.delete(`/api/workouts/${data.id}`, {\n            headers: {\n                'auth-token' : data.token\n            }\n        })\n        .then( res => {\n            console.log( res.data );\n            dispatch( onRequestSuccess( 'workouts', res.data ) )\n        }).catch( err => {\n            console.log(err);\n        })\n    }\n}\n\nexport const renderCreateWorkout = () => {\n    return render( { redirect: '/workouts/create' } );\n}\nexport const renderViewWorkout = data => {\n    return render( {\n        redirect: `/workouts/${ data._id }`,\n        view: data\n    } );\n}\n\nexport const renderCreateWorkoutSession = ( pk ) => {\n    return render( { redirect: `/workouts/${pk}/sessions/create` } );    \n}"]},"metadata":{},"sourceType":"module"}