{"ast":null,"code":"import _defineProperty from\"/var/www/git/projects/diary-of-events/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import axios from\"axios\";import Cookie from'js-cookie';import{REQUEST_SIGNUP_SUCCESS,RENDER_SIGNUP_COMPONENT,REQUEST_SIGNIN_FAILED,REQUEST_SIGNUP_STARTED,REQUEST_SIGNUP_CANCEL}from'./actionTypes';export var requestSuccess=function requestSuccess(data){return _defineProperty({account:data.data,type:REQUEST_SIGNUP_SUCCESS,loading:false,hide:true,redirect:data.redirect,toast:data.toast,errors:[]},\"loading\",false);};var requestStarted=function requestStarted(){return{loading:true,type:REQUEST_SIGNUP_STARTED,errors:[]};};var requestFailed=function requestFailed(err){var errors=[];switch(err.status){case 400:errors=err.data.errors;break;case 500:errors.push({message:err.statusText});errors=errors;}return{type:REQUEST_SIGNIN_FAILED,errors:errors,redirect:'/',loading:false};};export var signup=function signup(data){return function(dispatch){dispatch(requestStarted());axios.post('/api/accounts/signup',data).then(function(res){Cookie.set('account',res.data.account);dispatch(requestSuccess({data:res.data.account,toast:'Account created successfully. Login to access account',redirect:'/'}));}).catch(function(err){dispatch(requestFailed(err.response));});};};export var signupCancel=function signupCancel(){return function(dispatch){dispatch({type:REQUEST_SIGNUP_CANCEL,hide:true,errors:[]});};};export var showSignup=function showSignup(currentState){return function(dispatch){dispatch({type:RENDER_SIGNUP_COMPONENT,hide:!currentState,errors:[]});};};","map":{"version":3,"sources":["/var/www/git/projects/diary-of-events/src/store/actions/signup.js"],"names":["axios","Cookie","REQUEST_SIGNUP_SUCCESS","RENDER_SIGNUP_COMPONENT","REQUEST_SIGNIN_FAILED","REQUEST_SIGNUP_STARTED","REQUEST_SIGNUP_CANCEL","requestSuccess","data","account","type","loading","hide","redirect","toast","errors","requestStarted","requestFailed","err","status","push","message","statusText","signup","dispatch","post","then","res","set","catch","response","signupCancel","showSignup","currentState"],"mappings":"8JAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAEA,OAASC,sBAAT,CAAiCC,uBAAjC,CAA0DC,qBAA1D,CAAiFC,sBAAjF,CAAyGC,qBAAzG,KAAqI,eAArI,CAEA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,IAAI,CAAI,CAClC,wBACIC,OAAO,CAAED,IAAI,CAACA,IADlB,CAEIE,IAAI,CAAER,sBAFV,CAGIS,OAAO,CAAE,KAHb,CAIIC,IAAI,CAAE,IAJV,CAKIC,QAAQ,CAAEL,IAAI,CAACK,QALnB,CAMIC,KAAK,CAAEN,IAAI,CAACM,KANhB,CAOIC,MAAM,CAAE,EAPZ,YAQa,KARb,EAUH,CAXM,CAaP,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzB,MAAO,CACHL,OAAO,CAAE,IADN,CAEHD,IAAI,CAAEL,sBAFH,CAGHU,MAAM,CAAE,EAHL,CAAP,CAKH,CAND,CAQA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,GAAG,CAAI,CACzB,GAAIH,CAAAA,MAAM,CAAG,EAAb,CACA,OAAQG,GAAG,CAACC,MAAZ,EACI,IAAK,IAAL,CACIJ,MAAM,CAAGG,GAAG,CAACV,IAAJ,CAASO,MAAlB,CACA,MACJ,IAAK,IAAL,CACIA,MAAM,CAACK,IAAP,CAAY,CAAEC,OAAO,CAAEH,GAAG,CAACI,UAAf,CAAZ,EACAP,MAAM,CAAGA,MAAT,CANR,CAQA,MAAO,CACHL,IAAI,CAAEN,qBADH,CAEHW,MAAM,CAAEA,MAFL,CAGHF,QAAQ,CAAE,GAHP,CAIHF,OAAO,CAAE,KAJN,CAAP,CAMH,CAhBD,CAkBA,MAAO,IAAMY,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAf,IAAI,CAAI,CAE1B,MAAO,UAAAgB,QAAQ,CAAI,CACfA,QAAQ,CAAER,cAAc,EAAhB,CAAR,CAEAhB,KAAK,CAACyB,IAAN,CAAW,sBAAX,CAAmCjB,IAAnC,EACCkB,IADD,CACO,SAAAC,GAAG,CAAI,CACV1B,MAAM,CAAC2B,GAAP,CAAW,SAAX,CAAsBD,GAAG,CAACnB,IAAJ,CAASC,OAA/B,EACAe,QAAQ,CAAEjB,cAAc,CAAC,CACrBC,IAAI,CAAEmB,GAAG,CAACnB,IAAJ,CAASC,OADM,CAErBK,KAAK,CAAE,uDAFc,CAGrBD,QAAQ,CAAE,GAHW,CAAD,CAAhB,CAAR,CAKH,CARD,EASCgB,KATD,CASQ,SAAAX,GAAG,CAAI,CACXM,QAAQ,CAAEP,aAAa,CAAEC,GAAG,CAACY,QAAN,CAAf,CAAR,CACH,CAXD,EAYH,CAfD,CAgBH,CAlBM,CAoBP,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAC9B,MAAO,UAAAP,QAAQ,CAAI,CACfA,QAAQ,CAAC,CACLd,IAAI,CAAEJ,qBADD,CAELM,IAAI,CAAE,IAFD,CAGLG,MAAM,CAAE,EAHH,CAAD,CAAR,CAKH,CAND,CAOH,CARM,CAUP,MAAO,IAAMiB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAC,YAAY,CAAI,CACtC,MAAO,UAAAT,QAAQ,CAAI,CACfA,QAAQ,CAAC,CACLd,IAAI,CAAEP,uBADD,CAELS,IAAI,CAAE,CAACqB,YAFF,CAGLlB,MAAM,CAAE,EAHH,CAAD,CAAR,CAKH,CAND,CAOH,CARM","sourcesContent":["import axios from \"axios\";\nimport Cookie from 'js-cookie';\n\nimport { REQUEST_SIGNUP_SUCCESS, RENDER_SIGNUP_COMPONENT, REQUEST_SIGNIN_FAILED, REQUEST_SIGNUP_STARTED, REQUEST_SIGNUP_CANCEL} from './actionTypes';\n\nexport const requestSuccess = data => {\n    return {\n        account: data.data,\n        type: REQUEST_SIGNUP_SUCCESS,\n        loading: false,\n        hide: true,\n        redirect: data.redirect,\n        toast: data.toast,\n        errors: [],\n        loading: false\n    };\n};\n\nconst requestStarted = () => {\n    return {\n        loading: true,\n        type: REQUEST_SIGNUP_STARTED,\n        errors: [],\n    }\n}\n\nconst requestFailed = err => {\n    let errors = [];\n    switch( err.status ) {\n        case 400:\n            errors = err.data.errors;\n            break;\n        case 500:\n            errors.push({ message: err.statusText})\n            errors = errors;\n    }\n    return {\n        type: REQUEST_SIGNIN_FAILED,\n        errors: errors,\n        redirect: '/',\n        loading: false\n    };\n}\n\nexport const signup = data => {\n\n    return dispatch => {\n        dispatch( requestStarted() );\n\n        axios.post('/api/accounts/signup', data)\n        .then( res => {\n            Cookie.set('account', res.data.account);\n            dispatch( requestSuccess({ \n                data: res.data.account,\n                toast: 'Account created successfully. Login to access account',\n                redirect: '/'\n            }) );\n        })\n        .catch( err => {\n            dispatch( requestFailed( err.response ) );\n        });\n    };\n};\n\nexport const signupCancel = () => {\n    return dispatch => {\n        dispatch({\n            type: REQUEST_SIGNUP_CANCEL,\n            hide: true,\n            errors: [],\n        });\n    };\n};\n\nexport const showSignup = currentState => {\n    return dispatch => {\n        dispatch({\n            type: RENDER_SIGNUP_COMPONENT,\n            hide: !currentState,\n            errors: [],\n        });\n    };\n};"]},"metadata":{},"sourceType":"module"}